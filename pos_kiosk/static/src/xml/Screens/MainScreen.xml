<?xml version="1.0" encoding="UTF-8" ?>
<templates id="template" xml:space="preserve">

    <t t-name="MainScreen" owl="1">
        <div>
            <div class="relative w-screen h-[10%] overflow-hidden opacity-30" style="background: linear-gradient(to top, #ff0000, #00ff00);">
                <img class="w-full h-[30vh] object-cover" t-att-src="topBannerLogo" alt="Banner Logo" />
            </div>

            <div class="main-screen left-0 top-[10%] absolute flex-col justify-start items-center inline-flex ">
                <div class="category-container self-stretch justify-center items-center inline-flex">
                    <div class="grow shrink basis-0 h-[100px] justify-center items-center gap-4 flex">
                        <t t-foreach='categories' t-as='category' t-key='category.id'>
                            <div t-attf-class="category bg-white rounded-xl shadow flex-col justify-center items-center gap-2 inline-flex {{ category.id === selectedCategoryId ? 'bg-red-500' : '' }}" t-on-click="setCategory(category.id)">
                                <div t-attf-class="text-sm font-bold leading-tight {{ category.id === selectedCategoryId ? 'text-white' : 'text-gray-600' }}"> 
                                    <t t-esc="category.name" />
                                </div>
                            </div>
                        </t>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 justify-center items-center max-h-[80vh] flex-grow overflow-y-auto overscroll-contain">
                    <t t-foreach='sub_categories' t-as='subcategory' t-key='subcategory.id'>
                        <div class="p-8 mt-2 mb-2 py-4 flex-col justify-center items-center gap-4 flex">
                            <div class="self-stretch justify-start items-center gap-2 inline-flex">
                                <div class="text-justify text-gray-600 text-lg font-semibold leading-7">
                                    <t t-esc='subcategory.name' />
                                </div>
                            </div>
                            <div class="flex flex-wrap justify-center items-center gap-4">
                                <t t-foreach='subcategory.productList' t-as='product' t-key='product.id'>
                                    <div class="product bg-gray-50 border-2 border-gray-200 rounded-xl flex-col justify-center items-center inline-flex" t-on-click='addProduct(product.id)'>
                                        <img class="product-image justify-center relative rounded-xl" t-att-src="productImageURL(product.id)" t-att-alt="product.display_name"/>
                                        <div class="h-16 p-4 flex-col justify-center items-start flex">
                                            <div class="text-justify text-gray-900 text-sm font-normal leading-tight">
                                                <t t-esc='getProductName(product.id)' />
                                            </div>
                                            <div class="justify-center items-center gap-2 inline-flex">
                                                <div class="text-justify text-gray-800 text-sm font-bold leading-tight">
                                                    <t t-esc='getProductPrice(product.id)'/>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </t>
                            </div>
                        </div>
                    </t>
                </div>
            </div>

            <t t-if='haveProduct()'>
                <div class="cart-container">
                    <div class="left-panel">
                        <div class="button-container" t-on-click="openCart">
                            <i class="fa fa-shopping-cart" />
                            <div class="text-container">
                                <div class="item-count"><t t-esc='getTotalItems()' /> Itens</div>
                                <div class="item-description">Ver carrinho</div>
                            </div>
                        </div>
                    </div>
                    <div class="price-container bg-red-500" t-on-click="openPaymentScreen">
                        <div class="price"><t t-esc="getTotalValue()" /></div>
                        <div class="checkout-container">
                            <div class="checkout-text">Finalizar</div>
                        </div>
                    </div>
                </div>
            </t>
        </div>
    </t>

</templates>
